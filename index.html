<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arduino Mega 2560 - Complete Quiz</title>
  <style>
    body {
      background: linear-gradient(135deg, #152348 0%, #15497b 45%, #1e2d68 100%);
      color: #e5ecfa;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .container {
      margin: 32px auto 16px auto;
      background: #222d42cc;
      border-radius: 18px;
      box-shadow: 0 6px 24px #0009;
      padding: 32px 22px 16px 22px;
      max-width: 700px;
      width: 92vw;
    }
    h1 {
      font-size: 2.1rem;
      margin: 0 0 14px 0;
      color: #7db7ff;
      letter-spacing: .5px;
    }
    .quiz-section {
      margin-top: 10px;
      font-size: 1.08em;
      color: #96cfff;
    }
    .question {
      margin: 24px 0 10px 0;
      font-weight: bold;
      font-size: 1.1rem;
      line-height: 1.5;
    }
    .options {
      list-style: none;
      padding: 0;
      margin-bottom: 8px;
    }
    .options li {
      margin: 0 0 11px 0;
      padding: 8px 12px;
      border-radius: 8px;
      background: #183257;
      cursor: pointer;
      border: 2px solid #1c497d80;
      transition: background 0.23s, border 0.2s;
      color: #e5ecfa;
    }
    .options li.selected {
      background: #185ca0;
      border: 2px solid #6cb8f0;
      color: #fff;
    }
    .options li.correct {
      background: #187fa3;
      border: 2px solid #84ecb0;
      color: #fff;
    }
    .options li.incorrect {
      background: #933944;
      border: 2px solid #d3505a;
      color: #fff;
    }
    .feedback {
      margin: 10px 0 7px 0;
      font-size: 1em;
      font-weight: 500;
      color: #ffb89a;
    }
    .controls {
      margin: 16px 0 0 0;
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    button {
      background: #18496e;
      color: #e5ecfa;
      border: none;
      border-radius: 7px;
      padding: 9px 21px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #2671bf;
      color: #fff;
    }
    button:disabled {
      background: #2d3a4f;
      color: #5a6b82;
      cursor: not-allowed;
    }
    .progress {
      font-size: 1.1em;
      margin-bottom: 12px;
      color: #9abbf7;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .jump-select {
      background: #183257;
      color: #e5ecfa;
      border: 2px solid #1c497d80;
      border-radius: 7px;
      padding: 6px 10px;
      font-size: 0.95em;
      cursor: pointer;
      transition: border 0.2s;
    }
    .jump-select:hover {
      border-color: #6cb8f0;
    }
    .footer {
      margin: 30px 0 12px 0;
      text-align: center;
      font-size: 1.1em;
      color: #7db7ff;
      letter-spacing: 1px;
    }
    .score-display {
      font-size: 1.3em;
      color: #84ecb0;
      margin: 20px 0;
    }
    @media (max-width:550px) {
      .container { padding: 12px 2vw 9px 2vw; }
      .progress { font-size: 1em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Arduino Mega 2560 Quiz</h1>
    <div class="progress">
      <span id="progress">Question 1 of 122</span>
      <select class="jump-select" id="jumpSelect" onchange="jumpToQuestion()">
        <option value="">Jump to Question...</option>
      </select>
    </div>
    <div id="section" class="quiz-section"></div>
    <div id="question" class="question"></div>
    <ul class="options" id="options"></ul>
    <div id="feedback" class="feedback"></div>
    <div class="controls">
      <button onclick="prevQuestion()" id="prevBtn">Previous</button>
      <button onclick="nextQuestion()" id="nextBtn">Next</button>
      <button onclick="restartQuiz()" id="restartBtn" style="display:none">Restart</button>
    </div>
  </div>
  <div class="footer">
    Developed by: Ahmed Al-Batayneh (المبرمج أحمد البطاينة)
  </div>

  <script>
    const quiz = [
      {"id":"1.1.2_1","section":"1.1.2 Arduino MEGA 2560 vs. Arduino Uno","question":"What are the two types of microcontroller packages available for Arduino Uno?","options":["SMD only","DIP only","DIP (through-hole, replaceable) and SMD (surface-mounted)","TQFP and QFN"],"correct_option":2,"explanation":"Arduino Uno comes in DIP (easy to replace) and SMD versions, while Mega 2560 only uses SMD."},
      {"id":"1.1.2_2","section":"1.1.2 Arduino MEGA 2560 vs. Arduino Uno","question":"How many pin sockets does Arduino Uno have (excluding ICSP)?","options":["20","32","54","86"],"correct_option":1,"explanation":"Arduino Uno has 32 pin sockets, while Mega 2560 has 86 pin sockets."},
      {"id":"1.1.2_3","section":"1.1.2 Arduino MEGA 2560 vs. Arduino Uno","question":"How many pin sockets does Arduino MEGA 2560 have (excluding ICSP)?","options":["32","54","70","86"],"correct_option":3,"explanation":"Arduino MEGA 2560 has approximately 86 pin sockets for expanded connectivity."},
      {"id":"1.1.2_4","section":"1.1.2 Arduino MEGA 2560 vs. Arduino Uno","question":"Why is the MEGA 2560 microcontroller harder to replace than the DIP version of Uno?","options":["It is too expensive","It is surface-mounted and requires desoldering skills","It cannot be removed at all","It uses a different voltage"],"correct_option":1,"explanation":"The MEGA 2560 uses SMD packaging which is soldered to the board and requires special equipment to replace."},
      {"id":"1.1.4_1","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What is the main microcontroller chip on Arduino MEGA 2560?","options":["ATmega328P","ATmega2560","ATmega16U2","ATmega32U4"],"correct_option":1,"explanation":"The ATmega2560 is the main microcontroller that runs user programs on the MEGA 2560."},
      {"id":"1.1.4_2","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What type of USB connector does Arduino MEGA 2560 use?","options":["USB Mini-B","USB Micro-B","USB Type-B","USB Type-C"],"correct_option":2,"explanation":"Arduino MEGA 2560 uses a standard USB Type-B connector for programming and power."},
      {"id":"1.1.4_3","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What is the recommended external power supply voltage range for Arduino MEGA 2560?","options":["3-5V DC","5-7V DC","7-12V DC","12-20V DC"],"correct_option":2,"explanation":"External power should be 7-12V DC via the barrel jack, with center pin positive."},
      {"id":"1.1.4_4","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What is the function of the Reset button on Arduino MEGA 2560?","options":["Powers off the board","Restarts the microcontroller and re-runs the sketch","Erases the uploaded program","Switches between USB and external power"],"correct_option":1,"explanation":"The Reset button restarts the ATmega2560 and re-runs the uploaded sketch from the beginning."},
      {"id":"1.1.4_5","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"Which digital pin is the built-in L LED connected to?","options":["Pin 0","Pin 1","Pin 13","Pin 53"],"correct_option":2,"explanation":"The L LED is connected to digital pin 13 and is user-programmable."},
      {"id":"1.1.4_6","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What is the role of the ATmega16U2 chip on Arduino MEGA 2560?","options":["Main microcontroller for running sketches","USB-to-Serial bridge for programming and communication","Power regulator","Reset controller"],"correct_option":1,"explanation":"ATmega16U2 acts as a USB-to-Serial bridge between the computer and the main microcontroller."},
      {"id":"1.1.4_7","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"How many ICSP headers are present on Arduino MEGA 2560?","options":["0","1","2","3"],"correct_option":2,"explanation":"There are 2 ICSP headers: one for ATmega2560 and one for ATmega16U2."},
      {"id":"1.1.4_8","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"How many mounting holes does Arduino MEGA 2560 have?","options":["2","4","6","8"],"correct_option":2,"explanation":"Arduino MEGA 2560 has 6 mounting holes: 4 at corners and 2 near the middle."},
      {"id":"1.1.6_1","section":"1.1.6 Extending the Hardware","question":"What are shields in the Arduino context?","options":["Protective cases for the board","Pre-built add-on boards that plug into pin headers","Software libraries","Power adapters"],"correct_option":1,"explanation":"Shields are ready-made boards that add functionality (WiFi, motor control, etc.) and plug directly into Arduino headers."},
      {"id":"1.1.6_2","section":"1.1.6 Extending the Hardware","question":"What is a breadboard used for?","options":["Permanent circuit installation","Temporary circuit prototyping without soldering","Power supply only","Data storage"],"correct_option":1,"explanation":"Breadboards allow temporary circuit building using jumper wires without soldering, ideal for testing."},
      {"id":"1.1.6_3","section":"1.1.6 Extending the Hardware","question":"What is a prototype shield?","options":["A pre-programmed shield","A blank shield for designing custom circuits","A power shield","A wireless communication shield"],"correct_option":1,"explanation":"Prototype shields are blank boards with holes/tracks for building custom circuits on top of Arduino."},
      {"id":"1.2_1","section":"1.2 Arduino MEGA 2560 Firmware","question":"How many microcontrollers on Arduino MEGA 2560 have firmware?","options":["1","2","3","4"],"correct_option":1,"explanation":"Both ATmega2560 and ATmega16U2 have their own built-in firmware."},
      {"id":"1.3_1","section":"1.3 Precautions During Handling and Usage","question":"What should you do before touching Arduino MEGA 2560 components?","options":["Wear gloves","Discharge static electricity from your body","Apply voltage","Connect USB first"],"correct_option":1,"explanation":"Static electricity can damage sensitive chips; discharge it before touching the board."},
      {"id":"1.3_2","section":"1.3 Precautions During Handling and Usage","question":"When should you attach or remove shields and wires?","options":["Anytime","Only when board is powered off","Only when USB is connected","During sketch upload"],"correct_option":1,"explanation":"Always disconnect power before attaching/removing components to prevent shorts or damage."},
      {"id":"1.7.2_1","section":"1.7.2 Arduino MEGA ADK vs. Arduino MEGA 2560","question":"What additional feature does Arduino MEGA ADK have compared to MEGA 2560?","options":["More digital pins","USB host port for Android devices","Built-in WiFi","More memory"],"correct_option":1,"explanation":"MEGA ADK has a USB host port for direct connection to Android smartphones/tablets."},
      {"id":"1.8_1","section":"1.1.8 Third-Party Compatible Boards","question":"Why are there many third-party Arduino MEGA 2560 compatible boards?","options":["Arduino is copyrighted","Arduino hardware is open-source","Arduino is very cheap","Arduino doesn't work well"],"correct_option":1,"explanation":"Arduino hardware designs are open-source, allowing third parties to manufacture compatible boards."},
      {"id":"1.8_2","section":"1.1.8 Third-Party Compatible Boards","question":"What is a potential issue with cheap clone Arduino boards?","options":["They are always faster","Lower quality, possible defects, no official support","They use different programming language","They are larger in size"],"correct_option":1,"explanation":"Clone boards may have quality issues and lack official support; original boards guarantee reliability."},
      {"id":"2.1_1","section":"2.1 Microcontroller","question":"What is the full part number of the microcontroller used on Arduino Mega 2560?","options":["ATmega328P-PU","ATmega2560-16AU","ATmega2560-15AU","ATmega16U2-MU"],"correct_option":1,"explanation":"The ATmega2560-16AU is the correct part number (16AU indicating 16MHz operation)."},
      {"id":"2.4_1","section":"2.4 Power Supply","question":"What is the recommended input voltage range for the external power jack?","options":["5-9V","7-12V","9-15V","12-20V"],"correct_option":1,"explanation":"The recommended voltage range is 7-12V DC for stable operation."},
      {"id":"2.5_1","section":"2.5 Serial Communication","question":"Which pins are used for Serial0 (USB communication)?","options":["Pin 0 (RX0) and Pin 1 (TX0)","Pin 18 (TX1) and Pin 19 (RX1)","Pin 16 (TX2) and Pin 17 (RX2)","Pin 14 (TX3) and Pin 15 (RX3)"],"correct_option":0,"explanation":"Serial0 uses Pin 0 (RX0) and Pin 1 (TX0) for USB communication with the computer."},
      {"id":"3.1_1","section":"3.1 Pin Default and Alternate Functions","question":"Which pins on Arduino MEGA 2560 are used for TWI (I2C) communication?","options":["Pin 50 and Pin 51","Pin 20 (SDA1) and Pin 21 (SCL1)","Pin 0 and Pin 1","Pin 52 and Pin 53"],"correct_option":1,"explanation":"TWI/I2C uses Pin 20 (SDA1) and Pin 21 (SCL1). These pins are also duplicated on separate headers for shield compatibility."},
      {"id":"3.1_2","section":"3.1 Pin Default and Alternate Functions","question":"Which pins are used for SPI communication on Arduino MEGA 2560?","options":["Pin 0, 1, 2, 3","Pin 20, 21, 22, 23","Pin 50 (MISO), 51 (MOSI), 52 (SCK), 53 (SS)","Pin 13, 14, 15, 16"],"correct_option":2,"explanation":"SPI uses Pin 50 (MISO), 51 (MOSI), 52 (SCK), and 53 (SS). It's recommended to use the ICSP header for SPI connections."},
      {"id":"3.1_3","section":"3.1 Pin Default and Alternate Functions","question":"Why are TWI pins duplicated on Arduino MEGA 2560?","options":["To increase data transfer speed","For shield compatibility with both Uno and MEGA","To reduce power consumption","For redundancy in case of pin failure"],"correct_option":1,"explanation":"TWI pins are duplicated on separate headers to ensure shields designed for Uno can also work with MEGA 2560."},
      {"id":"3.1_4","section":"3.1 Pin Default and Alternate Functions","question":"Which header should be used for SPI connections for best shield compatibility?","options":["Digital pins 50-53","ICSP header","Analog header","Power header"],"correct_option":1,"explanation":"The 6-pin ICSP header provides the best compatibility for SPI connections across different Arduino boards and shields."},
      {"id":"3.2_1","section":"3.2 ATmega2560 to Arduino Mapping","question":"Can analog pins A0-A15 be used as digital I/O pins?","options":["No, they can only read analog values","Yes, they can be used as digital pins 54-69","Only A0-A7 can be digital","Only in special programming mode"],"correct_option":1,"explanation":"Analog pins A0-A15 can function as digital I/O pins numbered 54-69, giving MEGA 2560 up to 70 digital pins total."},
      {"id":"3.2_2","section":"3.2 ATmega2560 to Arduino Mapping","question":"How many total digital I/O pins are available on Arduino MEGA 2560?","options":["54","62","70","86"],"correct_option":2,"explanation":"MEGA 2560 has 54 dedicated digital pins (0-53) plus 16 analog pins (A0-A15) that can be used as digital, totaling 70 digital I/O pins."},
      {"id":"3.2_3","section":"3.2 ATmega2560 to Arduino Mapping","question":"What determines whether a pin has alternate functions like PWM or interrupt capability?","options":["Pin number only","The ATmega2560 hardware design","Software configuration only","External components"],"correct_option":1,"explanation":"Alternate functions are determined by the ATmega2560's internal hardware. Software can select which function to use, but hardware determines availability."},
      {"id":"3.3_1","section":"3.3 Pin Types and Interfacing","question":"What is the recommended maximum continuous current per I/O pin?","options":["10mA","20mA","40mA","100mA"],"correct_option":1,"explanation":"The recommended maximum continuous current is 20mA per pin. While 40mA is the absolute maximum, it's not advised for safe operation."},
      {"id":"3.3_2","section":"3.3 Pin Types and Interfacing","question":"What is the absolute maximum total current through the entire ATmega2560 chip?","options":["100mA","150mA","200mA","500mA"],"correct_option":2,"explanation":"The absolute maximum total current through all pins combined is 200mA. Always design circuits to stay well below this limit."},
      {"id":"3.3_3","section":"3.3 Pin Types and Interfacing - LED Resistor","question":"Why must an LED be connected with a series resistor?","options":["To make it brighter","To limit current and prevent damage","To increase voltage","To change LED color"],"correct_option":1,"explanation":"Without a resistor, excessive current flows through the LED which can burn it out and potentially damage the microcontroller pin."},
      {"id":"3.3_4","section":"3.3 Pin Types and Interfacing - LED Resistor","question":"Calculate the resistor needed for an LED with 2V drop, 10mA current, using 5V supply. What is the value?","options":["150Ω","220Ω","300Ω","470Ω"],"correct_option":2,"explanation":"Using Ohm's law: R = (5V - 2V) / 0.01A = 300Ω. Use the closest standard value (typically 330Ω or 270Ω)."},
      {"id":"3.3_5","section":"3.3 Pin Types and Interfacing - LED Resistor","question":"If supply is 5V, LED voltage is 2.2V, and desired current is 15mA, what resistor value is needed?","options":["140Ω","187Ω","220Ω","330Ω"],"correct_option":1,"explanation":"R = (5 - 2.2) / 0.015 = 2.8 / 0.015 ≈ 187Ω. Use 220Ω (next higher standard value) for safety."},
      {"id":"3.3_6","section":"3.3 Pin Types and Interfacing - Current Sourcing/Sinking","question":"In current sourcing configuration, when does the LED turn ON?","options":["When pin is set to LOW","When pin is set to HIGH","When power is disconnected","LED cannot turn on in sourcing mode"],"correct_option":1,"explanation":"In current sourcing, the pin supplies current. Setting the pin HIGH provides voltage to power the LED through the resistor to ground."},
      {"id":"3.3_7","section":"3.3 Pin Types and Interfacing - Current Sourcing/Sinking","question":"In current sinking configuration, when does the LED turn ON?","options":["When pin is set to HIGH","When pin is set to LOW","Never turns on","Always stays on"],"correct_option":1,"explanation":"In current sinking, the LED is connected to positive supply, and the pin provides the path to ground. Setting pin LOW completes the circuit."},
      {"id":"3.3_8","section":"3.3 Pin Types and Interfacing","question":"How do you configure a pin as an output in Arduino code?","options":["digitalWrite(pin, OUTPUT)","pinMode(pin, OUTPUT)","setOutput(pin)","configPin(pin, OUTPUT)"],"correct_option":1,"explanation":"Use pinMode(pin, OUTPUT) to configure a pin as output. Then use digitalWrite(pin, HIGH/LOW) to control it."},
      {"id":"3.3_9","section":"3.3 Pin Types and Interfacing","question":"An LED with 470Ω resistor and 2V drop on 5V supply draws how much current?","options":["4.2mA","6.4mA","10mA","15mA"],"correct_option":1,"explanation":"I = V/R = (5-2)/470 = 3/470 ≈ 0.0064A = 6.4mA. This is within safe operating limits."},
      {"id":"3.3_10","section":"3.3 Pin Types and Interfacing","question":"What is the maximum recommended current per port group on ATmega2560?","options":["50mA","100-200mA","300mA","Unlimited"],"correct_option":1,"explanation":"Port groups have limits of 100-200mA depending on the specific port. Check datasheet for exact values per port."},
      {"id":"3.3_11","section":"3.3 Pin Types and Interfacing - Ohm's Law","question":"Using Ohm's Law (V=IR), if a 330Ω resistor has 3.3V across it, what current flows?","options":["5mA","10mA","15mA","20mA"],"correct_option":1,"explanation":"I = V/R = 3.3/330 = 0.01A = 10mA. This demonstrates basic Ohm's Law application."},
      {"id":"3.3_12","section":"3.3 Pin Types and Interfacing","question":"What happens if you exceed the 40mA absolute maximum per pin?","options":["Pin works faster","Pin may be permanently damaged","Nothing, it's a safety margin","Voltage increases automatically"],"correct_option":1,"explanation":"Exceeding 40mA can permanently damage the pin or the entire microcontroller. Always stay at or below 20mA for safety."},
      {"id":"3.3_13","section":"3.3 Pin Types and Interfacing - Practical","question":"If you need to drive 8 LEDs each at 15mA from one port group with 200mA limit, is it safe?","options":["Yes, 120mA total is safe","No, exceeds port limit","Yes, but only with resistors","No calculation needed"],"correct_option":0,"explanation":"8 × 15mA = 120mA, which is within the 200mA port limit. However, it's close to limits, so consider using transistors for better design."},
      {"id":"1.1.2_3","section":"1.1.2 Arduino MEGA 2560 vs. Arduino Uno","question":"How many pin sockets does Arduino MEGA 2560 have (excluding ICSP)?","options":["32","54","70","86"],"correct_option":3,"explanation":"Arduino MEGA 2560 has approximately 86 pin sockets for expanded connectivity."},
      {"id":"1.1.2_4","section":"1.1.2 Arduino MEGA 2560 vs. Arduino Uno","question":"Why is the MEGA 2560 microcontroller harder to replace than the DIP version of Uno?","options":["It is too expensive","It is surface-mounted and requires desoldering skills","It cannot be removed at all","It uses a different voltage"],"correct_option":1,"explanation":"The MEGA 2560 uses SMD packaging which is soldered to the board and requires special equipment to replace."},
      {"id":"1.1.4_1","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What is the main microcontroller chip on Arduino MEGA 2560?","options":["ATmega328P","ATmega2560","ATmega16U2","ATmega32U4"],"correct_option":1,"explanation":"The ATmega2560 is the main microcontroller that runs user programs on the MEGA 2560."},
      {"id":"1.1.4_2","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What type of USB connector does Arduino MEGA 2560 use?","options":["USB Mini-B","USB Micro-B","USB Type-B","USB Type-C"],"correct_option":2,"explanation":"Arduino MEGA 2560 uses a standard USB Type-B connector for programming and power."},
      {"id":"1.1.4_3","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What is the recommended external power supply voltage range for Arduino MEGA 2560?","options":["3-5V DC","5-7V DC","7-12V DC","12-20V DC"],"correct_option":2,"explanation":"External power should be 7-12V DC via the barrel jack, with center pin positive."},
      {"id":"1.1.4_4","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What is the function of the Reset button on Arduino MEGA 2560?","options":["Powers off the board","Restarts the microcontroller and re-runs the sketch","Erases the uploaded program","Switches between USB and external power"],"correct_option":1,"explanation":"The Reset button restarts the ATmega2560 and re-runs the uploaded sketch from the beginning."},
      {"id":"1.1.4_5","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"Which digital pin is the built-in L LED connected to?","options":["Pin 0","Pin 1","Pin 13","Pin 53"],"correct_option":2,"explanation":"The L LED is connected to digital pin 13 and is user-programmable."},
      {"id":"1.1.4_6","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"What is the role of the ATmega16U2 chip on Arduino MEGA 2560?","options":["Main microcontroller for running sketches","USB-to-Serial bridge for programming and communication","Power regulator","Reset controller"],"correct_option":1,"explanation":"ATmega16U2 acts as a USB-to-Serial bridge between the computer and the main microcontroller."},
      {"id":"1.1.4_7","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"How many ICSP headers are present on Arduino MEGA 2560?","options":["0","1","2","3"],"correct_option":2,"explanation":"There are 2 ICSP headers: one for ATmega2560 and one for ATmega16U2."},
      {"id":"1.1.4_8","section":"1.1.4 Arduino MEGA 2560 Main Parts","question":"How many mounting holes does Arduino MEGA 2560 have?","options":["2","4","6","8"],"correct_option":2,"explanation":"Arduino MEGA 2560 has 6 mounting holes: 4 at corners and 2 near the middle."},
      {"id":"1.1.6_1","section":"1.1.6 Extending the Hardware","question":"What are shields in the Arduino context?","options":["Protective cases for the board","Pre-built add-on boards that plug into pin headers","Software libraries","Power adapters"],"correct_option":1,"explanation":"Shields are ready-made boards that add functionality (WiFi, motor control, etc.) and plug directly into Arduino headers."},
      {"id":"1.1.6_2","section":"1.1.6 Extending the Hardware","question":"What is a breadboard used for?","options":["Permanent circuit installation","Temporary circuit prototyping without soldering","Power supply only","Data storage"],"correct_option":1,"explanation":"Breadboards allow temporary circuit building using jumper wires without soldering, ideal for testing."},
      {"id":"1.1.6_3","section":"1.1.6 Extending the Hardware","question":"What is a prototype shield?","options":["A pre-programmed shield","A blank shield for designing custom circuits","A power shield","A wireless communication shield"],"correct_option":1,"explanation":"Prototype shields are blank boards with holes/tracks for building custom circuits on top of Arduino."},
      {"id":"1.2_1","section":"1.2 Arduino MEGA 2560 Firmware","question":"How many microcontrollers on Arduino MEGA 2560 have firmware?","options":["1","2","3","4"],"correct_option":1,"explanation":"Both ATmega2560 and ATmega16U2 have their own built-in firmware."},
      {"id":"1.3_1","section":"1.3 Precautions During Handling and Usage","question":"What should you do before touching Arduino MEGA 2560 components?","options":["Wear gloves","Discharge static electricity from your body","Apply voltage","Connect USB first"],"correct_option":1,"explanation":"Static electricity can damage sensitive chips; discharge it before touching the board."},
      {"id":"1.3_2","section":"1.3 Precautions During Handling and Usage","question":"When should you attach or remove shields and wires?","options":["Anytime","Only when board is powered off","Only when USB is connected","During sketch upload"],"correct_option":1,"explanation":"Always disconnect power before attaching/removing components to prevent shorts or damage."},
      {"id":"1.7.2_1","section":"1.7.2 Arduino MEGA ADK vs. Arduino MEGA 2560","question":"What additional feature does Arduino MEGA ADK have compared to MEGA 2560?","options":["More digital pins","USB host port for Android devices","Built-in WiFi","More memory"],"correct_option":1,"explanation":"MEGA ADK has a USB host port for direct connection to Android smartphones/tablets."},
      {"id":"1.8_1","section":"1.1.8 Third-Party Compatible Boards","question":"Why are there many third-party Arduino MEGA 2560 compatible boards?","options":["Arduino is copyrighted","Arduino hardware is open-source","Arduino is very cheap","Arduino doesn't work well"],"correct_option":1,"explanation":"Arduino hardware designs are open-source, allowing third parties to manufacture compatible boards."},
      {"id":"1.8_2","section":"1.1.8 Third-Party Compatible Boards","question":"What is a potential issue with cheap clone Arduino boards?","options":["They are always faster","Lower quality, possible defects, no official support","They use different programming language","They are larger in size"],"correct_option":1,"explanation":"Clone boards may have quality issues and lack official support; original boards guarantee reliability."},
      {"id":"2.1_1","section":"2.1 Microcontroller","question":"What is the full part number of the microcontroller used on Arduino Mega 2560?","options":["ATmega328P-PU","ATmega2560-16AU","ATmega2560-15AU","ATmega16U2-MU"],"correct_option":1,"explanation":"The ATmega2560-16AU is the correct part number (16AU indicating 16MHz operation)."},
      {"id":"2.4_1","section":"2.4 Power Supply","question":"What is the recommended input voltage range for the external power jack?","options":["5-9V","7-12V","9-15V","12-20V"],"correct_option":1,"explanation":"The recommended voltage range is 7-12V DC for stable operation."},
      {"id":"2.5_1","section":"2.5 Serial Communication","question":"Which pins are used for Serial0 (USB communication)?","options":["Pin 0 (RX0) and Pin 1 (TX0)","Pin 18 (TX1) and Pin 19 (RX1)","Pin 16 (TX2) and Pin 17 (RX2)","Pin 14 (TX3) and Pin 15 (RX3)"],"correct_option":0,"explanation":"Serial0 uses Pin 0 (RX0) and Pin 1 (TX0) for USB communication with the computer."},
      {"id":"2.1_2","section":"2.1 Microcontroller","question":"What type of chip package is the ATmega2560 housed in?","options":["PDIP (28 pin)","TQFP (100 pin)","SOIC (32 pin)","QFN (64 pin)"],"correct_option":1,"explanation":"TQFP (Thin Quad Flat Package) with 100 pins is used for surface mounting."},
      {"id":"2.1_3","section":"2.1 Microcontroller","question":"What is the operating frequency of ATmega2560?","options":["8MHz","12MHz","16MHz","20MHz"],"correct_option":2,"explanation":"The ATmega2560 operates at 16MHz as indicated by the -16AU designation."},
      {"id":"2.2_1","section":"2.2 Memory","question":"How much Flash memory does ATmega2560 have?","options":["32KB","128KB","256KB","512KB"],"correct_option":2,"explanation":"ATmega2560 has 256KB of Flash memory for storing program code."},
      {"id":"2.2_2","section":"2.2 Memory","question":"How much SRAM does ATmega2560 have?","options":["2KB","4KB","8KB","16KB"],"correct_option":2,"explanation":"ATmega2560 has 8KB of SRAM for variables and runtime data."},
      {"id":"2.2_3","section":"2.2 Memory","question":"How much EEPROM is available on ATmega2560?","options":["1KB","2KB","4KB","8KB"],"correct_option":2,"explanation":"ATmega2560 has 4KB of EEPROM for non-volatile data storage."},
      {"id":"2.3_1","section":"2.3 Digital I/O Pins","question":"How many digital I/O pins does MEGA 2560 have?","options":["54","62","70","86"],"correct_option":0,"explanation":"MEGA 2560 has 54 digital I/O pins (pins 0-53), plus analog pins can be used as digital."},
      {"id":"2.3_2","section":"2.3 Digital I/O Pins","question":"How many pins support PWM output?","options":["6","12","15","20"],"correct_option":2,"explanation":"MEGA 2560 has 15 PWM-capable pins for analog output simulation."},
      {"id":"2.3_3","section":"2.3 Digital I/O Pins","question":"How many external interrupt pins are available?","options":["2","4","6","8"],"correct_option":2,"explanation":"MEGA 2560 provides 6 external interrupt pins (INT0-INT5)."},
      {"id":"2.4_2","section":"2.4 Power Supply","question":"What is the operating voltage of Arduino MEGA 2560?","options":["3.3V","5V","7V","12V"],"correct_option":1,"explanation":"The board operates at 5V internally for the microcontroller and I/O."},
      {"id":"2.4_3","section":"2.4 Power Supply","question":"What is the maximum current the 5V regulator can provide?","options":["500mA","800mA","1000mA","1500mA"],"correct_option":1,"explanation":"The onboard 5V regulator can supply approximately 800mA-1A depending on input voltage."},
      {"id":"2.4_4","section":"2.4 Power Supply","question":"What polarity must the external DC jack have?","options":["Center negative","Center positive","Either works","AC only"],"correct_option":1,"explanation":"The DC jack requires center-positive polarity (positive on inner pin)."},
      {"id":"2.5_2","section":"2.5 Serial Communication","question":"How many hardware serial ports (UART) does MEGA 2560 have?","options":["1","2","3","4"],"correct_option":3,"explanation":"MEGA 2560 has 4 hardware serial ports: Serial0, Serial1, Serial2, and Serial3."},
      {"id":"2.5_3","section":"2.5 Serial Communication","question":"Which serial port is connected to the USB interface?","options":["Serial0","Serial1","Serial2","Serial3"],"correct_option":0,"explanation":"Serial0 (pins 0 and 1) is connected to the USB-to-serial converter for computer communication."},
      {"id":"2.6_1","section":"2.6 Analog Inputs","question":"How many analog input pins does MEGA 2560 have?","options":["6","8","12","16"],"correct_option":3,"explanation":"MEGA 2560 has 16 analog input pins (A0-A15)."},
      {"id":"2.6_2","section":"2.6 Analog Inputs","question":"What is the resolution of the ADC (Analog-to-Digital Converter)?","options":["8-bit","10-bit","12-bit","16-bit"],"correct_option":1,"explanation":"The ADC has 10-bit resolution, providing values from 0-1023."},
      {"id":"2.6_3","section":"2.6 Analog Inputs","question":"What is the default voltage reference for analog inputs?","options":["3.3V","5V","Variable","External only"],"correct_option":1,"explanation":"By default, analog inputs use 5V as the reference voltage (AVCC)."},
      {"id":"2.7_1","section":"2.7 Communication Interfaces","question":"Which pins are used for I2C (TWI) communication?","options":["Pin 0, 1","Pin 20 (SDA), 21 (SCL)","Pin 50, 51","Pin 52, 53"],"correct_option":1,"explanation":"I2C uses Pin 20 (SDA) and Pin 21 (SCL) for data and clock lines."},
      {"id":"2.7_2","section":"2.7 Communication Interfaces","question":"Which pins are used for SPI communication?","options":["Pin 10, 11, 12, 13","Pin 20, 21, 22, 23","Pin 50 (MISO), 51 (MOSI), 52 (SCK), 53 (SS)","Pin 0, 1, 2, 3"],"correct_option":2,"explanation":"SPI uses pins 50 (MISO), 51 (MOSI), 52 (SCK), and 53 (SS)."},
      {"id":"2.8_1","section":"2.8 Clock and Timers","question":"How many hardware timers does ATmega2560 have?","options":["3","4","6","8"],"correct_option":2,"explanation":"ATmega2560 has 6 hardware timers (Timer0-Timer5) for various timing functions."},
      {"id":"2.8_2","section":"2.8 Clock and Timers","question":"What type of crystal oscillator is used?","options":["8MHz ceramic","16MHz crystal","20MHz crystal","32.768kHz RTC"],"correct_option":1,"explanation":"A 16MHz crystal oscillator provides the main clock for the microcontroller."},
      {"id":"2.9_1","section":"2.9 USB Interface","question":"Which chip handles USB-to-Serial conversion?","options":["ATmega328P","ATmega2560","ATmega16U2","FTDI FT232"],"correct_option":2,"explanation":"The ATmega16U2 chip handles USB-to-serial conversion for programming and communication."},
      {"id":"2.9_2","section":"2.9 USB Interface","question":"Can the ATmega16U2 firmware be updated?","options":["No, it's permanent","Yes, via ICSP","Yes, via USB DFU mode","Only at factory"],"correct_option":2,"explanation":"The ATmega16U2 can be reprogrammed using USB DFU (Device Firmware Upgrade) mode."},
      {"id":"2.10_1","section":"2.10 Reset Circuit","question":"What voltage threshold triggers the reset circuit?","options":["1.5V","2.5V","3.5V","4.5V"],"correct_option":1,"explanation":"The reset circuit typically triggers when voltage drops below approximately 2.5V."},
      {"id":"2.10_2","section":"2.10 Reset Circuit","question":"How is the reset button connected?","options":["Directly to ground","Through pull-up resistor to VCC","Through capacitor","To separate power supply"],"correct_option":1,"explanation":"The reset button connects through a pull-up resistor; pressing it pulls the reset pin to ground."},
      {"id":"2.11_1","section":"2.11 Pin Configuration","question":"Can digital pins be configured as inputs with internal pull-up resistors?","options":["No","Yes, all digital pins","Only specific pins","Only with external resistors"],"correct_option":1,"explanation":"All digital pins can be configured with internal pull-up resistors using pinMode(pin, INPUT_PULLUP)."},
      {"id":"2.11_2","section":"2.11 Pin Configuration","question":"What is the typical value of internal pull-up resistors?","options":["1kΩ","10kΩ","20-50kΩ","100kΩ"],"correct_option":2,"explanation":"Internal pull-up resistors are typically 20-50kΩ."},
      {"id":"2.12_1","section":"2.12 Bootloader","question":"What is the purpose of the bootloader?","options":["Power management","USB communication","Program upload without external programmer","Reset control"],"correct_option":2,"explanation":"The bootloader allows uploading programs via USB without needing an external programmer."},
      {"id":"2.12_2","section":"2.12 Bootloader","question":"How much Flash memory does the bootloader occupy?","options":["512 bytes","2KB","4KB","8KB"],"correct_option":3,"explanation":"The bootloader typically occupies 8KB of Flash memory."},
      {"id":"2.13_1","section":"2.13 ICSP Headers","question":"What does ICSP stand for?","options":["Internal Circuit Serial Programming","In-Circuit Serial Programming","Integrated Chip System Protocol","Input Control Signal Port"],"correct_option":1,"explanation":"ICSP stands for In-Circuit Serial Programming, used for programming via SPI interface."},
      {"id":"2.13_2","section":"2.13 ICSP Headers","question":"How many pins does an ICSP header have?","options":["4","6","8","10"],"correct_option":1,"explanation":"ICSP headers have 6 pins: MISO, VCC, SCK, MOSI, RESET, and GND."},
      {"id":"2.14_1","section":"2.14 LED Indicators","question":"What does the 'L' LED indicate?","options":["Power status","USB activity","User-programmable (Pin 13)","Error condition"],"correct_option":2,"explanation":"The 'L' LED is connected to Pin 13 and is user-programmable."},
      {"id":"2.14_2","section":"2.14 LED Indicators","question":"What do TX and RX LEDs show?","options":["Power levels","Serial data transmission","Pin states","Clock signals"],"correct_option":1,"explanation":"TX (transmit) and RX (receive) LEDs show serial communication activity."},
      {"id":"2.15_1","section":"2.15 Board Dimensions","question":"What are the approximate dimensions of Arduino MEGA 2560?","options":["53mm × 68mm","68mm × 53mm","101.52mm × 53.3mm","120mm × 60mm"],"correct_option":2,"explanation":"Arduino MEGA 2560 measures approximately 101.52mm × 53.3mm."},
      {"id":"2.15_2","section":"2.15 Board Dimensions","question":"What is the weight of the board?","options":["15g","25g","37g","50g"],"correct_option":2,"explanation":"Arduino MEGA 2560 weighs approximately 37 grams."},
      {"id":"2.16_1","section":"2.16 Shield Compatibility","question":"Are Arduino Uno shields compatible with MEGA 2560?","options":["No compatibility","Most shields work but may not use extra pins","All shields perfectly compatible","Need adapters"],"correct_option":1,"explanation":"Most Uno shields are compatible but won't utilize the extra pins available on MEGA 2560."},
      {"id":"2.17_1","section":"2.17 Current Limitations","question":"What is the DC current per I/O pin?","options":["10mA","20mA","40mA","100mA"],"correct_option":2,"explanation":"Each I/O pin can safely source or sink 40mA of current (20mA recommended)."},
      {"id":"2.17_2","section":"2.17 Current Limitations","question":"What is the current limit for the 3.3V pin?","options":["50mA","100mA","150mA","500mA"],"correct_option":0,"explanation":"The 3.3V pin can supply up to 50mA of current."},
      {"id":"2.18_1","section":"2.18 Environmental Specs","question":"What is the recommended operating temperature range?","options":["-20°C to 60°C","-40°C to 85°C","0°C to 70°C","-10°C to 50°C"],"correct_option":1,"explanation":"The recommended operating temperature is -40°C to 85°C for industrial applications."},
      {"id":"2.19_1","section":"2.19 Power Consumption","question":"What is typical power consumption at 5V with all peripherals active?","options":["50mA","100-200mA","500mA","1A"],"correct_option":1,"explanation":"Typical power consumption ranges from 100-200mA depending on connected peripherals and activity."},
      {"id":"2.20_1","section":"2.20 Design Files","question":"Are Arduino MEGA 2560 design files open-source?","options":["No, proprietary","Yes, under Creative Commons","Yes, under GPL","Partially open"],"correct_option":1,"explanation":"Arduino hardware designs are open-source under Creative Commons licenses."},
      {"id":"3.1_1","section":"3.1 Pin Default and Alternate Functions","question":"Which pins on Arduino MEGA 2560 are used for TWI (I2C) communication?","options":["Pin 50 and Pin 51","Pin 20 (SDA1) and Pin 21 (SCL1)","Pin 0 and Pin 1","Pin 52 and Pin 53"],"correct_option":1,"explanation":"TWI/I2C uses Pin 20 (SDA1) and Pin 21 (SCL1). These pins are also duplicated on separate headers for shield compatibility."},
      {"id":"3.1_2","section":"3.1 Pin Default and Alternate Functions","question":"Which pins are used for SPI communication on Arduino MEGA 2560?","options":["Pin 0, 1, 2, 3","Pin 20, 21, 22, 23","Pin 50 (MISO), 51 (MOSI), 52 (SCK), 53 (SS)","Pin 13, 14, 15, 16"],"correct_option":2,"explanation":"SPI uses Pin 50 (MISO), 51 (MOSI), 52 (SCK), and 53 (SS). It's recommended to use the ICSP header for SPI connections."},
      {"id":"3.1_3","section":"3.1 Pin Default and Alternate Functions","question":"Why are TWI pins duplicated on Arduino MEGA 2560?","options":["To increase data transfer speed","For shield compatibility with both Uno and MEGA","To reduce power consumption","For redundancy in case of pin failure"],"correct_option":1,"explanation":"TWI pins are duplicated on separate headers to ensure shields designed for Uno can also work with MEGA 2560."},
      {"id":"3.1_4","section":"3.1 Pin Default and Alternate Functions","question":"Which header should be used for SPI connections for best shield compatibility?","options":["Digital pins 50-53","ICSP header","Analog header","Power header"],"correct_option":1,"explanation":"The 6-pin ICSP header provides the best compatibility for SPI connections across different Arduino boards and shields."},
      {"id":"3.2_1","section":"3.2 ATmega2560 to Arduino Mapping","question":"Can analog pins A0-A15 be used as digital I/O pins?","options":["No, they can only read analog values","Yes, they can be used as digital pins 54-69","Only A0-A7 can be digital","Only in special programming mode"],"correct_option":1,"explanation":"Analog pins A0-A15 can function as digital I/O pins numbered 54-69, giving MEGA 2560 up to 70 digital pins total."},
      {"id":"3.2_2","section":"3.2 ATmega2560 to Arduino Mapping","question":"How many total digital I/O pins are available on Arduino MEGA 2560?","options":["54","62","70","86"],"correct_option":2,"explanation":"MEGA 2560 has 54 dedicated digital pins (0-53) plus 16 analog pins (A0-A15) that can be used as digital, totaling 70 digital I/O pins."},
      {"id":"3.2_3","section":"3.2 ATmega2560 to Arduino Mapping","question":"What determines whether a pin has alternate functions like PWM or interrupt capability?","options":["Pin number only","The ATmega2560 hardware design","Software configuration only","External components"],"correct_option":1,"explanation":"Alternate functions are determined by the ATmega2560's internal hardware. Software can select which function to use, but hardware determines availability."},
      {"id":"3.3_1","section":"3.3 Pin Types and Interfacing","question":"What is the recommended maximum continuous current per I/O pin?","options":["10mA","20mA","40mA","100mA"],"correct_option":1,"explanation":"The recommended maximum continuous current is 20mA per pin. While 40mA is the absolute maximum, it's not advised for safe operation."},
      {"id":"3.3_2","section":"3.3 Pin Types and Interfacing","question":"What is the absolute maximum total current through the entire ATmega2560 chip?","options":["100mA","150mA","200mA","500mA"],"correct_option":2,"explanation":"The absolute maximum total current through all pins combined is 200mA. Always design circuits to stay well below this limit."},
      {"id":"3.3_3","section":"3.3 Pin Types and Interfacing - LED Resistor","question":"Why must an LED be connected with a series resistor?","options":["To make it brighter","To limit current and prevent damage","To increase voltage","To change LED color"],"correct_option":1,"explanation":"Without a resistor, excessive current flows through the LED which can burn it out and potentially damage the microcontroller pin."},
      {"id":"3.3_4","section":"3.3 Pin Types and Interfacing - LED Resistor","question":"Calculate the resistor needed for an LED with 2V drop, 10mA current, using 5V supply. What is the value?","options":["150Ω","220Ω","300Ω","470Ω"],"correct_option":2,"explanation":"Using Ohm's law: R = (5V - 2V) / 0.01A = 300Ω. Use the closest standard value (typically 330Ω or 270Ω)."},
      {"id":"3.3_5","section":"3.3 Pin Types and Interfacing - LED Resistor","question":"If supply is 5V, LED voltage is 2.2V, and desired current is 15mA, what resistor value is needed?","options":["140Ω","187Ω","220Ω","330Ω"],"correct_option":1,"explanation":"R = (5 - 2.2) / 0.015 = 2.8 / 0.015 ≈ 187Ω. Use 220Ω (next higher standard value) for safety."},
      {"id":"3.3_6","section":"3.3 Pin Types and Interfacing - Current Sourcing/Sinking","question":"In current sourcing configuration, when does the LED turn ON?","options":["When pin is set to LOW","When pin is set to HIGH","When power is disconnected","LED cannot turn on in sourcing mode"],"correct_option":1,"explanation":"In current sourcing, the pin supplies current. Setting the pin HIGH provides voltage to power the LED through the resistor to ground."},
      {"id":"3.3_7","section":"3.3 Pin Types and Interfacing - Current Sourcing/Sinking","question":"In current sinking configuration, when does the LED turn ON?","options":["When pin is set to HIGH","When pin is set to LOW","Never turns on","Always stays on"],"correct_option":1,"explanation":"In current sinking, the LED is connected to positive supply, and the pin provides the path to ground. Setting pin LOW completes the circuit."},
      {"id":"3.3_8","section":"3.3 Pin Types and Interfacing","question":"How do you configure a pin as an output in Arduino code?","options":["digitalWrite(pin, OUTPUT)","pinMode(pin, OUTPUT)","setOutput(pin)","configPin(pin, OUTPUT)"],"correct_option":1,"explanation":"Use pinMode(pin, OUTPUT) to configure a pin as output. Then use digitalWrite(pin, HIGH/LOW) to control it."},
      {"id":"3.3_9","section":"3.3 Pin Types and Interfacing","question":"An LED with 470Ω resistor and 2V drop on 5V supply draws how much current?","options":["4.2mA","6.4mA","10mA","15mA"],"correct_option":1,"explanation":"I = V/R = (5-2)/470 = 3/470 ≈ 0.0064A = 6.4mA. This is within safe operating limits."},
      {"id":"3.3_10","section":"3.3 Pin Types and Interfacing","question":"What is the maximum recommended current per port group on ATmega2560?","options":["50mA","100-200mA","300mA","Unlimited"],"correct_option":1,"explanation":"Port groups have limits of 100-200mA depending on the specific port. Check datasheet for exact values per port."},
      {"id":"3.3_11","section":"3.3 Pin Types and Interfacing - Ohm's Law","question":"Using Ohm's Law (V=IR), if a 330Ω resistor has 3.3V across it, what current flows?","options":["5mA","10mA","15mA","20mA"],"correct_option":1,"explanation":"I = V/R = 3.3/330 = 0.01A = 10mA. This demonstrates basic Ohm's Law application."},
      {"id":"3.3_12","section":"3.3 Pin Types and Interfacing","question":"What happens if you exceed the 40mA absolute maximum per pin?","options":["Pin works faster","Pin may be permanently damaged","Nothing, it's a safety margin","Voltage increases automatically"],"correct_option":1,"explanation":"Exceeding 40mA can permanently damage the pin or the entire microcontroller. Always stay at or below 20mA for safety."},
      {"id":"3.3_13","section":"3.3 Pin Types and Interfacing - Practical","question":"If you need to drive 8 LEDs each at 15mA from one port group with 200mA limit, is it safe?","options":["Yes, 120mA total is safe","No, exceeds port limit","Yes, but only with resistors","No calculation needed"],"correct_option":0,"explanation":"8 × 15mA = 120mA, which is within the 200mA port limit. However, it's close to limits, so consider using transistors for better design."}
    ];

    let currentQuestion = 0;
    let score = 0;
    let answered = false;

    function populateJumpSelect() {
      const select = document.getElementById('jumpSelect');
      quiz.forEach((q, idx) => {
        const option = document.createElement('option');
        option.value = idx;
        option.textContent = `Q${idx + 1}: ${q.section}`;
        select.appendChild(option);
      });
    }

    function jumpToQuestion() {
      const select = document.getElementById('jumpSelect');
      const selectedIdx = parseInt(select.value);
      if (!isNaN(selectedIdx)) {
        currentQuestion = selectedIdx;
        answered = false;
        renderQuestion();
      }
      select.value = '';
    }

    function renderQuestion() {
      document.getElementById('feedback').innerHTML = "";
      answered = false;
      
      if (currentQuestion < quiz.length) {
        let q = quiz[currentQuestion];
        document.getElementById('progress').textContent = `Question ${currentQuestion + 1} of ${quiz.length}`;
        document.getElementById('section').textContent = q.section;
        document.getElementById('question').textContent = q.question;
        
        let optionsUl = document.getElementById('options');
        optionsUl.innerHTML = "";
        q.options.forEach((opt, idx) => {
          let li = document.createElement('li');
          li.textContent = opt;
          li.onclick = () => selectOption(idx, li, q);
          optionsUl.appendChild(li);
        });
        
        document.getElementById('prevBtn').disabled = currentQuestion === 0;
        document.getElementById('nextBtn').textContent = currentQuestion === quiz.length - 1 ? 'Finish' : 'Next';
        document.getElementById('restartBtn').style.display = "none";
      } else {
        showResults();
      }
    }

    function selectOption(selectedIdx, liElem, q) {
      if (answered) return;
      
      let optionsUl = document.getElementById('options');
      let correctIdx = q.correct_option;
      
      Array.from(optionsUl.children).forEach(li => li.onclick = null);
      
      liElem.classList.add(selectedIdx === correctIdx ? 'correct' : 'incorrect');
      optionsUl.children[correctIdx].classList.add('correct');
      
      if (selectedIdx === correctIdx) {
        document.getElementById('feedback').textContent = '✔ ' + q.explanation;
        score++;
      } else {
        document.getElementById('feedback').textContent = '✖ ' + q.explanation;
      }
      
      answered = true;
    }

    function nextQuestion() {
      currentQuestion++;
      renderQuestion();
    }

    function prevQuestion() {
      if (currentQuestion > 0) {
        currentQuestion--;
        renderQuestion();
      }
    }

    function showResults() {
      const percentage = ((score / quiz.length) * 100).toFixed(1);
      document.getElementById('progress').textContent = `Quiz Complete!`;
      document.getElementById('section').innerHTML = "";
      document.getElementById('question').innerHTML = `<div class="score-display">Final Score: ${score} / ${quiz.length} (${percentage}%)</div>`;
      document.getElementById('options').innerHTML = "";
      document.getElementById('feedback').innerHTML = "";
      document.getElementById('prevBtn').style.display = "none";
      document.getElementById('nextBtn').style.display = "none";
      document.getElementById('restartBtn').style.display = "";
    }

    function restartQuiz() {
      score = 0;
      currentQuestion = 0;
      answered = false;
      document.getElementById('prevBtn').style.display = "";
      document.getElementById('nextBtn').style.display = "";
      renderQuestion();
    }

    populateJumpSelect();
    renderQuestion();
  </script>
</body>
</html>
